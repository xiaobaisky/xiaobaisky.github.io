const coverColor=(e=!1)=>{if(e){var o=document.querySelector("#nav-music .aplayer-pic").style.backgroundImage;const t=/url\("([^"]+)"\)/.exec(o);(o=t?t[1]:"")&&localColor(o,e)}else{const e=PAGE_CONFIG.color||document.getElementById("post-cover")?.src;e?localColor(e):setDefaultThemeColors()}},setDefaultThemeColors=()=>{Object.entries({"--efu-main":"var(--efu-theme)","--efu-main-op":"var(--efu-theme-op)","--efu-main-op-deep":"var(--efu-theme-op-deep)","--efu-main-none":"var(--efu-theme-none)"}).forEach((([e,o])=>{document.documentElement.style.setProperty(e,o)})),initThemeColor()},localColor=(e,o=!1)=>{const t=new ColorThief,r=new Image;r.crossOrigin="Anonymous",r.onload=()=>{const e=t.getColor(r);o?setMusicColor(rgbToHex(e)):setThemeColors(rgbToHex(e),...e)},r.onerror=()=>console.error("Image Error"),r.src=e},rgbToHex=([e,o,t])=>"#"+[e,o,t].map((e=>Math.floor(.8*e).toString(16).padStart(2,"0"))).join(""),setMusicColor=e=>{if(!e)return setDefaultThemeColors();document.querySelector("#nav-music").style.setProperty("--efu-music",e)},setThemeColors=(e,o=null,t=null,r=null)=>{if(!e)return setDefaultThemeColors();const l={"--efu-main":e,"--efu-main-op":e+"23","--efu-main-op-deep":e+"dd","--efu-main-none":e+"00"};if(Object.entries(l).forEach((([e,o])=>{document.documentElement.style.setProperty(e,o)})),null!==o&&null!==t&&null!==r){Math.round((299*o+587*t+114*r)/1e3)<125&&(adjustCardStyles(),e=LightenDarkenColor(e,50),setThemeColors(e))}document.getElementById("coverdiv").classList.add("loaded"),initThemeColor()},LightenDarkenColor=(e,o)=>{let t=!1;"#"===e[0]&&(e=e.slice(1),t=!0);let r=parseInt(e,16),l=(r>>16)+o,n=(r>>8&255)+o,a=(255&r)+o;return l=Math.max(Math.min(l,255),0),n=Math.max(Math.min(n,255),0),a=Math.max(Math.min(a,255),0),(t?"#":"")+((1<<24)+(l<<16)+(n<<8)+a).toString(16).slice(1)},adjustCardStyles=()=>{document.querySelectorAll(".card-content").forEach((e=>{e.style.setProperty("--efu-card-bg","var(--efu-white)")}));document.querySelectorAll(".sayhi").forEach((e=>{e.style.setProperty("background","var(--efu-white-op)"),e.style.setProperty("color","var(--efu-white)")}))};